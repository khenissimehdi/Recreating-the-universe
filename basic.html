<html>
  <head>
    <title>TP-WEBGL</title>

    <style>
      body { margin: 0; background-color: black;}
      canvas { width: 100%; height: 100% }
    </style>
  </head>
  <body>
    <script src="three.js"></script>
    <script src="OrbitControls.js"></script>
    <script>
      var earthOrbitRadius = 50.9,
      earthOrbitAngle = 0,
      earthOrbitSpeed = 0.5,
    
      moonOrbitRadius = 10,
      moonOrbitAngle = 0,
      moonOrbitSpeed = 4;



      var player = { height:1.8, speed:1, turnSpeed:Math.PI*0.02 };
      var scene = new THREE.Scene();
       
      //Create a new perspective camera
      var camera = new THREE.PerspectiveCamera(90, window.innerWidth/window.innerHeight, 1, 1000);
      camera.position.set(60.70,70.8, 60.70);

      //Create the WebGL renderer and set its size to the full dimensions of the screen.
      var renderer = new THREE.WebGLRenderer({antialias: true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      var orbit = new THREE.OrbitControls( camera, renderer.domElement );
     
      //Add the renderer canvas to the DOM.
      document.body.appendChild(renderer.domElement);
      //Create a new ambient light
      var ambientLight = new THREE.AmbientLight(0x222222);
        scene.add(ambientLight);
    
    var light = new THREE.PointLight(0xFFFFFF, 1, 0);
        light.position.set(0, 0, 0);
        scene.add(light);
   /* var light2 = new THREE.PointLight(0xFFFFFF, 1, 0);
        light2.position.set(20, 10, 20);
        scene.add(light2);*/
      
      //Create textures and material
      var loader = new THREE.TextureLoader();
      var textureearth =loader.load( "./images/earth.jpg");
      var texturecloud =loader.load( "./images/clouds.jpg");
      var texturestarfield = loader.load("./images/starfield.png");
      var texturemoon = loader.load("./images/moon.jpg");
      var texturesolar = loader.load("./images/solarsys.jpg");
      var texturesun = loader.load("./images/sun.jpg");

     //creating objects
      var earthGeometry = new THREE.SphereGeometry( 5, 50, 50 );
      var earthMaterial = new THREE.MeshPhongMaterial({
        map: textureearth,
        color: 0xaaaaaa,
        specular: 0x333333,
        shininess: 25
        });
        var sunGeometry = new THREE.SphereGeometry( 20, 50, 50 );
      var sunMaterial = new THREE.MeshPhongMaterial({
        map: texturesun,
        color: 0xaaaaaa,
        specular: 0x333333,
        shininess: 50
        });
      var cloudGeometry = new THREE.SphereGeometry( 5.2, 50, 50 );
      var cloudMaterial = new THREE.MeshPhongMaterial({
        map: texturecloud,
        color: 0xaaaaaa,
        specular: 0x333333,
        transparent: true,
        opacity: 0.1
        });
      var starGeometry = new THREE.SphereGeometry( 100, 50, 50 );
      var starMaterial = new THREE.MeshPhongMaterial({
        map: texturestarfield,
        side: THREE.DoubleSide,//to make the inside of the texture is the same as the outside
         shininess: 0,
         
        });
        var solarGeometry = new THREE.SphereGeometry( 1000, 100, 100 );
      var solarMaterial = new THREE.MeshPhongMaterial({
        map: texturesolar,
        side: THREE.DoubleSide,//to make the inside of the texture is the same as the outside
         shininess: 0,
         
        });
      var moonGeometry = new THREE.SphereGeometry( 3, 25, 25 );
      var moonMaterial = new THREE.MeshPhongMaterial({
        map: texturemoon,
        color: 0xaaaaaa,
        specular: 0x333333,
        shininess: 25
        
        });
        theEarthAndMoon = new THREE.Object3D();
        scene.add(theEarthAndMoon);
        

      //Build objects mesh using our geometry and material
      var earth = new THREE.Mesh(earthGeometry, earthMaterial);
      theEarthAndMoon.add(earth); 
      var cloud = new THREE.Mesh(cloudGeometry, cloudMaterial);
      theEarthAndMoon.add(cloud);
      var star = new THREE.Mesh(starGeometry, starMaterial);
      var moon = new THREE.Mesh(moonGeometry, moonMaterial);
      theEarthAndMoon.add(moon);
      //moon.position.set(35,0,0);
      var solar = new THREE.Mesh(solarGeometry, solarMaterial);
      var sun = new THREE.Mesh(sunGeometry, sunMaterial);
      //sun.position.set(-50,0,0);
      


      //Build objects mesh using our geometry and material
      
     
      
      var star1 = new THREE.Mesh(starGeometry, starMaterial);
      star1.position.set(300,0,0);
      
//add the object mesh to the scene
//scene.add(earth);
//scene.add(cloud);
scene.add(star);
//scene.add(moon);
scene.add(solar);
scene.add(sun);
scene.add(star1);
camera.position.z = 20;


var render = function (actions) {
 
  earth.rotation.y -= 0.0005; //move earth
  cloud.rotation.y -= 0.00025;// move cloud 
 
  earthOrbitAngle += earthOrbitSpeed; 
    var radians = earthOrbitAngle * Math.PI / 180;
    
    theEarthAndMoon.position.x = Math.cos(radians) * earthOrbitRadius;
    theEarthAndMoon.position.z = Math.sin(radians) * earthOrbitRadius;
    
    //run the Moon's orbit around the Earth
    moonOrbitAngle += moonOrbitSpeed; 
    var moonRadians = moonOrbitAngle * Math.PI / 180;
    
    moon.position.x = Math.cos(moonRadians) * moonOrbitRadius;
    moon.position.z = Math.sin(moonRadians) * moonOrbitRadius;

  

  renderer.render(scene, camera);
  requestAnimationFrame( render );
};
window.addEventListener('keydown',(keyCode) =>
    {
      var code = keyCode.key;

      var factor = 0.9;
     
      

      if (code == '+'){
        

      camera.position.x *= factor;
      camera.position.y *= factor;
      camera.position.z *= factor;

      }
      else if (code == '-'){
        //alert(addx)
        
        console.log(camera.position.x,camera.position.y,camera.position.z);
        camera.position.x /= factor;
        camera.position.y /= factor;
        camera.position.z /= factor;
    
          }
    if( code == '8')
    {
      
      camera.position.x -= Math.sin(camera.rotation.y) * player.speed; // sin is convert to 
      camera.position.z -= -Math.cos(camera.rotation.y) * player.speed;
      
	}
    
    else if (code == '2' )
    {
      camera.position.x += Math.sin(camera.rotation.y) * player.speed;
		  camera.position.z   += -Math.cos(camera.rotation.y) * player.speed;
       
    }
    else if (code == '4' )
    {
      camera.position.x += Math.sin(camera.rotation.y + Math.PI/2) * player.speed;
		camera.position.z   += -Math.cos(camera.rotation.y + Math.PI/2) * player.speed;
    }
    else if (code == '6' )
    {
    camera.position.x += Math.sin(camera.rotation.y - Math.PI/2) * player.speed;
		camera.position.z  += -Math.cos(camera.rotation.y - Math.PI/2) * player.speed;
    }
    else if (code == '7' )
    {
      camera.rotation.y -= player.turnSpeed;
      
      
    }
    else if (code == '9' )
    {
      camera.rotation.y += player.turnSpeed;
    }
    else if (code == '1' )
    {
      camera.rotation.x -= player.turnSpeed;
      
      
    }
    else if (code == '3' )
    {
      camera.rotation.x += player.turnSpeed;
    }
    else if (code == '0' )
    {
      camera.position.set(0, 0, -30);

    }
    else if (code == '.' )
    {
      camera.position.set(0, player.height, -5);
      camera.lookAt(new THREE.Vector3(0,player.height,0));

    }

     
     
    }
    )

render();

    </script>
  </body>
</html>